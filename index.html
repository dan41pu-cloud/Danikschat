<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>TeleMessenger ‚Äî –¥–µ–º–æ</title>
  <style>
    /* –ü—Ä–æ—Å—Ç–∞—è —Ç–µ–º–∞ –≤ –¥—É—Ö–µ Telegram */
    :root{
      --bg: #e6eef8;
      --panel: #ffffff;
      --muted: #9aa4b2;
      --accent: #2a8bf2;
      --accent-600: #1f6fd0;
      --msg-me: #cdf0ff;
      --msg-other: #ffffff;
      --shadow: 0 6px 18px rgba(23,35,54,0.08);
      --radius: 12px;
      font-family: "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
    }

    html,body{height:100%;margin:0;background:var(--bg);color:#111}
    .app {
      max-width:1100px;
      margin:24px auto;
      display:flex;
      gap:18px;
      padding:18px;
    }

    /* AUTH panel */
    .auth {
      width:360px;
      background:var(--panel);
      border-radius:var(--radius);
      box-shadow:var(--shadow);
      padding:20px;
    }
    .auth h1{margin:0 0 10px;font-size:22px;color:#0f1724}
    .auth .tab {
      display:flex;
      gap:8px;
      margin-bottom:12px;
    }
    .input, button {
      width:100%;
      padding:10px 12px;
      border-radius:10px;
      border:1px solid #e6eef8;
      outline:none;
      box-sizing:border-box;
      font-size:14px;
    }
    .input{background:#fbfdff}
    .muted{color:var(--muted);font-size:13px;margin-top:8px}
    .btn-primary{background:var(--accent);color:white;border:none;cursor:pointer}
    .btn-ghost{background:transparent;border:1px solid #e6eef8;color:var(--accent);cursor:pointer}

    /* Messenger layout */
    .messenger {
      flex:1;
      display:flex;
      gap:18px;
      min-height:520px;
    }

    /* Sidebar / contacts */
    .sidebar {
      width:300px;
      background:var(--panel);
      border-radius:var(--radius);
      box-shadow:var(--shadow);
      display:flex;
      flex-direction:column;
      overflow:hidden;
    }
    .sidebar .top{
      padding:16px;
      display:flex;
      align-items:center;
      justify-content:space-between;
      border-bottom:1px solid #f1f6fb;
    }
    .sidebar h3{margin:0;font-size:16px}
    .search {
      padding:10px 16px;
      border-bottom:1px solid #f1f6fb;
    }
    .search input{width:100%;}
    .contacts {
      overflow-y:auto;
      padding:8px;
    }
    .contact {
      display:flex;
      gap:12px;
      align-items:center;
      padding:10px;
      border-radius:10px;
      cursor:pointer;
    }
    .contact:hover{background:#f6fbff}
    .avatar {
      width:44px;height:44px;border-radius:12px;background:linear-gradient(135deg,#dbeffd,#9fd9ff);
      display:flex;align-items:center;justify-content:center;color:#024b7a;font-weight:700;
      font-size:16px;
    }
    .contact .meta{flex:1}
    .contact .name{font-weight:600}
    .online {width:10px;height:10px;border-radius:50%;background:#2ee08b;margin-left:6px}

    /* Chat area */
    .chat {
      flex:1;
      display:flex;
      flex-direction:column;
      background:var(--panel);
      border-radius:var(--radius);
      box-shadow:var(--shadow);
      overflow:hidden;
    }

    .chat .header{
      padding:14px 16px;
      border-bottom:1px solid #f1f6fb;
      display:flex;
      align-items:center;
      gap:12px;
    }
    .chat .header h4{margin:0;font-size:16px}
    .messages {
      padding:18px;
      flex:1;
      overflow-y:auto;
      background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(0,0,0,0.01));
    }
    .msg {
      display:inline-block;
      padding:10px 12px;
      margin:8px 0;
      border-radius:14px;
      max-width:68%;
      box-shadow:0 2px 6px rgba(16,24,40,0.03);
    }
    .msg.me{ margin-left:auto; background:var(--msg-me) }
    .msg.other{ background:var(--msg-other) }
    .msg .meta{font-size:12px;color:var(--muted);margin-bottom:6px}

    .composer{
      padding:12px;
      border-top:1px solid #f1f6fb;
      display:flex;
      gap:8px;
      align-items:center;
    }
    .composer input{flex:1;border-radius:12px;padding:10px 12px;border:1px solid #e6eef8}
    .icon-btn{background:transparent;border:none;padding:8px;border-radius:8px;cursor:pointer}
    .call-btn{background:var(--accent);color:white;border:none;padding:10px 12px;border-radius:10px;cursor:pointer}

    /* Video area (hidden until call) */
    .video-overlay{
      position:fixed;right:24px;bottom:24px;width:300px;height:200px;background:linear-gradient(180deg,#0e74d1,#0b53a0);
      border-radius:10px;padding:8px;color:white;display:none;flex-direction:column;z-index:999;
    }
    .video-row{display:flex;gap:8px;flex:1}
    video{width:100%;height:100%;background:#000;border-radius:8px;object-fit:cover;}
    .small{width:48%;height:100%}
    .video-controls{margin-top:8px;display:flex;gap:8px;justify-content:flex-end}
    .danger{background:#ff5b5b;color:white;border:none;padding:8px;border-radius:8px}
    @media(max-width:900px){
      .app{padding:12px;flex-direction:column;}
      .sidebar{width:100%;order:2;height:320px}
      .chat{order:1}
    }
  </style>
</head>
<body>
  <div class="app">
    <!-- –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è -->
    <div class="auth" id="authPanel">
      <h1>TeleMessenger</h1>

      <div style="display:flex;gap:8px;margin-bottom:10px">
        <button class="btn-ghost" id="showLogin">–í–æ–π—Ç–∏</button>
        <button class="btn-ghost" id="showReg">–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è</button>
      </div>

      <div id="loginBox" style="margin-top:6px;">
        <input id="logUser" class="input" placeholder="–õ–æ–≥–∏–Ω" />
        <input id="logPass" class="input" placeholder="–ü–∞—Ä–æ–ª—å" type="password" />
        <button class="btn-primary" id="btnLogin" style="margin-top:10px">–í–æ–π—Ç–∏</button>
        <div class="muted" id="loginMsg"></div>
      </div>

      <div id="regBox" style="margin-top:6px; display:none;">
        <input id="regUser" class="input" placeholder="–õ–æ–≥–∏–Ω" />
        <input id="regPass" class="input" placeholder="–ü–∞—Ä–æ–ª—å" type="password" />
        <button class="btn-primary" id="btnReg" style="margin-top:10px">–°–æ–∑–¥–∞—Ç—å –∞–∫–∫–∞—É–Ω—Ç</button>
        <div class="muted" id="regMsg"></div>
      </div>
    </div>

    <!-- –ú–µ—Å—Å–µ–Ω–¥–∂–µ—Ä -->
    <div class="messenger" style="display:none" id="messengerApp">
      <!-- Sidebar -->
      <div class="sidebar">
        <div class="top">
          <h3>–ö–æ–Ω—Ç–∞–∫—Ç—ã</h3>
          <div style="font-size:13px;color:var(--muted)" id="meLabel">‚Äî</div>
        </div>

        <div class="search">
          <input id="searchContact" class="input" placeholder="–ü–æ–∏—Å–∫ –∫–æ–Ω—Ç–∞–∫—Ç–∞" />
        </div>

        <div class="contacts" id="contactsList"></div>
      </div>

      <!-- Chat -->
      <div class="chat">
        <div class="header">
          <div style="display:flex;align-items:center;gap:12px">
            <div class="avatar" id="chatAvatar">U</div>
            <div>
              <h4 id="chatTitle">–í—ã–±–µ—Ä–∏—Ç–µ –∫–æ–Ω—Ç–∞–∫—Ç</h4>
              <div style="font-size:13px;color:var(--muted)" id="chatSubtitle">–û–Ω–ª–∞–π–Ω/–æ—Ñ–ª–∞–π–Ω</div>
            </div>
          </div>
        </div>

        <div class="messages" id="messages"></div>

        <div class="composer">
          <input id="messageInput" placeholder="–ù–∞–ø–∏—à–∏—Ç–µ —Å–æ–æ–±—â–µ–Ω–∏–µ..." />
          <button class="icon-btn" id="emojiBtn">üòä</button>
          <button class="call-btn" id="callBtn">–ü–æ–∑–≤–æ–Ω–∏—Ç—å</button>
          <button class="call-btn" id="sendBtn" style="background:var(--accent-600)">–û—Ç–ø—Ä–∞–≤–∏—Ç—å</button>
        </div>
      </div>
    </div>
  </div>

  <!-- Video overlay -->
  <div class="video-overlay" id="videoOverlay">
    <div class="video-row">
      <video id="remoteVid" autoplay playsinline></video>
      <video id="localVid" autoplay playsinline muted class="small"></video>
    </div>
    <div class="video-controls">
      <button class="icon-btn" id="toggleCam" style="background:rgba(255,255,255,0.08);color:white">–ö–∞–º–µ—Ä–∞</button>
      <button class="icon-btn" id="toggleMic" style="background:rgba(255,255,255,0.08);color:white">–ú–∏–∫—Ä–æ—Ñ–æ–Ω</button>
      <button class="danger" id="endCallBtn">–ó–∞–≤–µ—Ä—à–∏—Ç—å</button>
    </div>
  </div>

  <!-- Socket.io –∫–ª–∏–µ–Ω—Ç -->
  <script src="/socket.io/socket.io.js"></script>
  <script>
    // === –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è ===
    const authPanel = document.getElementById('authPanel');
    const loginBox = document.getElementById('loginBox');
    const regBox = document.getElementById('regBox');
    const messengerApp = document.getElementById('messengerApp');

    const showLogin = document.getElementById('showLogin');
    const showReg = document.getElementById('showReg');
    const btnLogin = document.getElementById('btnLogin');
    const btnReg = document.getElementById('btnReg');
    const loginMsg = document.getElementById('loginMsg');
    const regMsg = document.getElementById('regMsg');

    const contactsList = document.getElementById('contactsList');
    const meLabel = document.getElementById('meLabel');
    const chatTitle = document.getElementById('chatTitle');
    const chatSubtitle = document.getElementById('chatSubtitle');
    const chatAvatar = document.getElementById('chatAvatar');
    const messagesEl = document.getElementById('messages');

    const messageInput = document.getElementById('messageInput');
    const sendBtn = document.getElementById('sendBtn');
    const callBtn = document.getElementById('callBtn');

    const videoOverlay = document.getElementById('videoOverlay');
    const localVid = document.getElementById('localVid');
    const remoteVid = document.getElementById('remoteVid');
    const endCallBtn = document.getElementById('endCallBtn');
    const toggleCam = document.getElementById('toggleCam');
    const toggleMic = document.getElementById('toggleMic');

    const socket = io();

    let username = null;
    let users = []; // –≤—Å–µ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ
    let currentChat = null;
    let messages = {}; // messages[user] = [{from,text,time},...]
    let peer = null;
    let localStream = null;
    let camOn = true, micOn = true;

    // === UI: –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –≤–∫–ª–∞–¥–æ–∫ —Ä–µ–≥/–ª–æ–≥–∏–Ω ===
    showLogin.onclick = () => { loginBox.style.display='block'; regBox.style.display='none'; }
    showReg.onclick = () => { loginBox.style.display='none'; regBox.style.display='block'; }

    // === –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è —á–µ—Ä–µ–∑ API POST /register ===
    btnReg.onclick = async () => {
      const user = document.getElementById('regUser').value.trim();
      const pass = document.getElementById('regPass').value.trim();
      regMsg.textContent = '';
      if (!user || !pass) { regMsg.textContent = '–ó–∞–ø–æ–ª–Ω–∏—Ç–µ –≤—Å–µ –ø–æ–ª—è'; return; }

      try {
        const res = await fetch('/register', {
          method:'POST',
          headers:{'Content-Type':'application/json'},
          body: JSON.stringify({ username: user, password: pass })
        });
        const data = await res.json();
        if (data.success) {
          regMsg.textContent = '–ê–∫–∫–∞—É–Ω—Ç —Å–æ–∑–¥–∞–Ω ‚Äî –≤–æ–π–¥–∏—Ç–µ';
          loginBox.style.display='block'; regBox.style.display='none';
        } else regMsg.textContent = data.msg || '–û—à–∏–±–∫–∞';
      } catch (e) {
        regMsg.textContent = '–û—à–∏–±–∫–∞ —Å–µ—Ç–∏';
      }
    };

    // === –í—Ö–æ–¥ —á–µ—Ä–µ–∑ API POST /login ===
    btnLogin.onclick = async () => {
      const user = document.getElementById('logUser').value.trim();
      const pass = document.getElementById('logPass').value.trim();
      loginMsg.textContent = '';
      if (!user || !pass) { loginMsg.textContent = '–ó–∞–ø–æ–ª–Ω–∏—Ç–µ –≤—Å–µ –ø–æ–ª—è'; return; }

      try {
        const res = await fetch('/login', {
          method:'POST',
          headers:{'Content-Type':'application/json'},
          body: JSON.stringify({ username: user, password: pass })
        });
        const data = await res.json();
        if (!data.success) { loginMsg.textContent = data.msg || '–û—à–∏–±–∫–∞'; return; }

        // –£—Å–ø–µ—à–Ω—ã–π –≤—Ö–æ–¥
        username = data.username;
        startApp();
      } catch (e) {
        loginMsg.textContent = '–û—à–∏–±–∫–∞ —Å–µ—Ç–∏';
      }
    };

    // === –ü–æ—Å–ª–µ –ª–æ–≥–∏–Ω–∞: –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Å–æ–∫–µ—Ç–∞ –∏ UI ===
    function startApp(){
      authPanel.style.display = 'none';
      messengerApp.style.display = 'flex';
      meLabel.textContent = username;
      socket.emit('login', username); // —É–≤–µ–¥–æ–º–ª—è–µ–º —Å–µ—Ä–≤–µ—Ä
    }

    // === –°–æ–±—ã—Ç–∏—è –æ—Ç —Å–µ—Ä–≤–µ—Ä–∞: —Å–ø–∏—Å–æ–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π ===
    socket.on('userList', list => {
      users = list;
      renderContacts(list);
    });

    function renderContacts(list){
      contactsList.innerHTML = '';
      const q = document.getElementById('searchContact').value?.toLowerCase?.() || '';
      list.forEach(u=>{
        if (u === username) return;
        if (q && !u.toLowerCase().includes(q)) return;

        const row = document.createElement('div');
        row.className = 'contact';
        row.onclick = ()=>openChat(u);

        const av = document.createElement('div'); av.className='avatar';
        av.textContent = u.slice(0,2).toUpperCase();

        const meta = document.createElement('div'); meta.className='meta';
        const name = document.createElement('div'); name.className='name'; name.textContent = u;
        const sub = document.createElement('div'); sub.style.fontSize='13px'; sub.style.color='var(--muted)'; sub.textContent = (Math.random()>0.5? 'online':'offline'); // —Å–µ—Ä–≤–µ—Ä –º–æ–∂–µ—Ç —Å–ª–∞—Ç—å —Ä–µ–∞–ª—å–Ω—ã–π —Å—Ç–∞—Ç—É—Å
        meta.appendChild(name); meta.appendChild(sub);

        row.appendChild(av); row.appendChild(meta);
        contactsList.appendChild(row);
      });
    }

    document.getElementById('searchContact').addEventListener('input', ()=> renderContacts(users));

    // === –û—Ç–∫—Ä—ã—Ç—å —á–∞—Ç —Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º ===
    function openChat(user){
      currentChat = user;
      chatTitle.textContent = user;
      chatAvatar.textContent = user.slice(0,2).toUpperCase();
      chatSubtitle.textContent = '–ß–∞—Ç –ø—Ä–∏–≤–∞—Ç–Ω—ã–π';
      renderMessages(user);
    }

    // === –†–µ–Ω–¥–µ—Ä —Å–æ–æ–±—â–µ–Ω–∏–π ===
    function renderMessages(user){
      messagesEl = document.getElementById('messages');
      messagesEl.innerHTML = '';
      const arr = messages[user] || [];
      arr.forEach(m => appendMessageElement(m));
      messagesEl.scrollTop = messagesEl.scrollHeight;
    }

    function appendMessageElement(m){
      const el = document.createElement('div');
      el.className = 'msg ' + (m.from === username ? 'me' : 'other');
      const meta = document.createElement('div'); meta.className='meta';
      meta.textContent = `${m.from} ¬∑ ${m.time || new Date().toLocaleTimeString()}`;
      const text = document.createElement('div'); text.textContent = m.text;
      el.appendChild(meta); el.appendChild(text);
      messagesEl.appendChild(el);
    }

    // === –û—Ç–ø—Ä–∞–≤–∫–∞ –ø—Ä–∏–≤–∞—Ç–Ω–æ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è ===
    sendBtn.onclick = ()=>{
      const txt = messageInput.value.trim();
      if (!txt) return;
      if (!currentChat) { alert('–í—ã–±–µ—Ä–∏—Ç–µ –∫–æ–Ω—Ç–∞–∫—Ç'); return; }

      const msg = { from: username, to: currentChat, text: txt, time: new Date().toLocaleTimeString() };
      // –°–æ—Ö—Ä–∞–Ω—è–µ–º –ª–æ–∫–∞–ª—å–Ω–æ
      if (!messages[currentChat]) messages[currentChat]=[];
      messages[currentChat].push(msg);
      appendMessageElement(msg);
      messageInput.value='';

      // –û—Ç–ø—Ä–∞–≤–ª—è–µ–º —Ü–µ–ª–µ–≤–æ–º—É —Å–æ–∫–µ—Ç—É
      socket.emit('privateMessage', msg);
    };

    // === –ü—Ä–∏—ë–º –ø—Ä–∏–≤–∞—Ç–Ω–æ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è ===
    socket.on('privateMessage', msg=>{
      const other = msg.from === username ? msg.to : msg.from;
      if (!messages[other]) messages[other]=[];
      messages[other].push(msg);

      if (currentChat === msg.from) appendMessageElement(msg);
      // –º–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ/–∑–≤—É–∫–æ–≤–æ–π —Å–∏–≥–Ω–∞–ª
    });

    // === WebRTC 1-–Ω–∞-1 –∑–≤–æ–Ω–æ–∫ ===
    callBtn.onclick = async ()=>{
      if (!currentChat) { alert('–í—ã–±–µ—Ä–∏—Ç–µ –∫–æ–Ω—Ç–∞–∫—Ç'); return; }
      callUser(currentChat);
    };

    async function callUser(target){
      try {
        // –ø–æ–∫–∞–∑–∞—Ç—å overlay –∏ –ø–æ–ª—É—á–∏—Ç—å –º–µ–¥–∏–∞
        videoOverlay.style.display = 'flex';
        localStream = await navigator.mediaDevices.getUserMedia({ video:true, audio:true });
        localVid.srcObject = localStream;

        peer = new RTCPeerConnection();
        // –¥–æ–±–∞–≤–ª—è–µ–º –ª–æ–∫–∞–ª—å–Ω—ã–µ –¥–æ—Ä–æ–∂–∫–∏
        localStream.getTracks().forEach(t => peer.addTrack(t, localStream));

        peer.ontrack = e => { remoteVid.srcObject = e.streams[0]; }
        peer.onicecandidate = e => {
          if (e.candidate) socket.emit('call-candidate', { to: target, candidate: e.candidate });
        };

        const offer = await peer.createOffer();
        await peer.setLocalDescription(offer);

        socket.emit('call-offer', { to: target, from: username, offer });
      } catch (err) {
        console.error('call error', err);
        alert('–ù–µ —É–¥–∞–ª–æ—Å—å –Ω–∞—á–∞—Ç—å –∑–≤–æ–Ω–æ–∫: ' + err.message);
      }
    }

    // –ü—Ä–∏–Ω—è—Ç–∏–µ –æ—Ñ—Ñ–µ—Ä–∞ (callee)
    socket.on('call-offer', async data=>{
      const from = data.from;
      // —Å–ø—Ä–æ—Å–∏–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (–º–æ–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å –∫—Ä–∞—Å–∏–≤–µ–µ). –î–ª—è –¥–µ–º–æ ‚Äî –ø—Ä–∏–Ω–∏–º–∞–µ–º –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏.
      const accept = confirm(`–í—Ö–æ–¥—è—â–∏–π –∑–≤–æ–Ω–æ–∫ –æ—Ç ${from}. –ü—Ä–∏–Ω—è—Ç—å?`);
      if (!accept) return;

      videoOverlay.style.display = 'flex';
      localStream = await navigator.mediaDevices.getUserMedia({ video:true, audio:true });
      localVid.srcObject = localStream;

      peer = new RTCPeerConnection();
      localStream.getTracks().forEach(t => peer.addTrack(t, localStream));

      peer.ontrack = e => { remoteVid.srcObject = e.streams[0]; }
      peer.onicecandidate = e => {
        if (e.candidate) socket.emit('call-candidate', { to: from, candidate: e.candidate });
      };

      await peer.setRemoteDescription(new RTCSessionDescription(data.offer));
      const answer = await peer.createAnswer();
      await peer.setLocalDescription(answer);

      socket.emit('call-answer', { to: from, from: username, answer });
    });

    socket.on('call-answer', async data=>{
      if (!peer) return;
      await peer.setRemoteDescription(new RTCSessionDescription(data.answer));
    });

    socket.on('call-candidate', async data=>{
      if (!peer) return;
      try { await peer.addIceCandidate(new RTCIceCandidate(data.candidate)); } catch(e){ console.warn(e); }
    });

    endCallBtn.onclick = ()=>endCall();
    toggleCam.onclick = ()=>{
      if (!localStream) return;
      camOn = !camOn;
      localStream.getVideoTracks().forEach(t=>t.enabled = camOn);
      toggleCam.textContent = camOn ? '–ö–∞–º–µ—Ä–∞' : '–ö–∞–º–µ—Ä–∞ –≤—ã–∫–ª';
    };
    toggleMic.onclick = ()=>{
      if (!localStream) return;
      micOn = !micOn;
      localStream.getAudioTracks().forEach(t=>t.enabled = micOn);
      toggleMic.textContent = micOn ? '–ú–∏–∫—Ä–æ—Ñ–æ–Ω' : '–ú–∏–∫—Ä–æ—Ñ–æ–Ω –≤—ã–∫–ª';
    };

    function endCall(){
      if (peer) { peer.close(); peer = null; }
      if (localStream) { localStream.getTracks().forEach(t=>t.stop()); localStream=null; }
      videoOverlay.style.display = 'none';
      localVid.srcObject = null; remoteVid.srcObject = null;
    }

    // === –û–±—Ä–∞–±–æ—Ç–∫–∞ —Ä–∞–∑—Ä—ã–≤–∞ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è —Å–æ —Å—Ç–æ—Ä–æ–Ω—ã —Å–µ—Ä–≤–µ—Ä–∞ (cleanup) ===
    socket.on('disconnect', ()=>{ console.log('socket disconnected'); });

    // === –ü–æ–¥—Å–∫–∞–∑–∫–∏ –¥–ª—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ ===
    // –°–µ—Ä–≤–µ—Ä –¥–æ–ª–∂–µ–Ω:
    // - –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è—Ç—å POST /register –∏ POST /login (–∫–∞–∫ –≤ server.js –∏–∑ –ø—Ä–æ–µ–∫—Ç–∞)
    // - –ø–æ—Å—ã–ª–∞—Ç—å 'userList' –≤—Å–µ–º –∫–ª–∏–µ–Ω—Ç–∞–º –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏
    // - –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å 'privateMessage' –∏ –ø–µ—Ä–µ—Å—ã–ª–∞—Ç—å —Ç–æ–ª—å–∫–æ —Ü–µ–ª–µ–≤–æ–º—É —Å–æ–∫–µ—Ç—É
    // - –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å —Å–∏–≥–Ω–∞–ª—ã WebRTC: call-offer, call-answer, call-candidate (—Ç–æ—á–µ—á–Ω–æ –ø–æ –∏–º–µ–Ω–∏)
  </script>
</body>
 </html>
 
