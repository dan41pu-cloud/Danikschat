<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Чат + Видеозвонки</title>
<style>
body { font-family: Arial; background:#222; color:#fff; }
#chat { max-width:600px; margin:20px auto; }
#messages { background:#333; padding:10px; height:300px; overflow-y:auto; border-radius:10px; }
#videoRoom video { background:#000; }
button { padding:10px 15px; border:none; border-radius:8px; cursor:pointer; }
</style>
</head>
<body>


<div id="chat">
<h2>Чат</h2>
<div id="messages"></div>


<input id="msg" placeholder="Введите сообщение" />
<button id="send">Отправить</button>


<br><br>
<button id="videoCallBtn" style="background:#3ba55d;">Видеозвонок 1-на-1</button>


<div id="videoRoom" style="display:none;margin-top:20px;">
<h2 id="videoStatus">Ожидание второго пользователя...</h2>


<video id="localVideo" autoplay playsinline muted style="width:100%;border-radius:10px;"></video>
<video id="remoteVideo" autoplay playsinline style="width:100%;border-radius:10px;margin-top:10px;"></video>


<button id="leaveVideo" style="background:#f04747;margin-top:10px;">Выйти</button>
</div>
</div>


<script src="https://cdn.socket.io/4.7.2/socket.io.min.js"></script>
<script>
const socket = io();


// ------------------ ЧАТ ------------------
const messages = document.getElementById("messages");
const msg = document.getElementById("msg");
document.getElementById("send").onclick = () => {
socket.emit("msg", msg.value);
msg.value = "";
};


socket.on("msg", (text) => {
const div = document.createElement("div");
div.textContent = text;
messages.appendChild(div);
messages.scrollTop = messages.scrollHeight;
</html>
